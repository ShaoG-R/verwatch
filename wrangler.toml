name = "rust-watchdog"
main = "build/worker/shim.mjs"
compatibility_date = "2024-12-01"

[build]
command = "cargo install -q worker-build && worker-build --release"

[[kv_namespaces]]
binding = "VERSION_STORE"
id = "<你的_KV_ID>"      # 运行 `wrangler kv namespace create VERSION_STORE` 获取

[triggers]
crons = ["0 * * * *"] 

[vars]
# 新增：用于管理 API 的鉴权密钥
# 建议在 Cloudflare Dashboard 中加密设置，不要明文写在这里
# 运行 `wrangler secret put ADMIN_SECRET` 设置
ADMIN_SECRET = "your-super-secret-password"